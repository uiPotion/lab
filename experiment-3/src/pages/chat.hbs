{{> head title='AI Assistant' description='Chat with our AI assistant' bodyClass='page-chat'}}

{{> navbar}}

<!-- Chat Layout -->
<div class="chat-layout" id="main-content">
  <!-- Sidebar (Collapsible on mobile) -->
  <aside class="chat-sidebar" id="chat-sidebar" aria-hidden="false">
    <div class="chat-sidebar__header">
      <button class="chat-sidebar__new-btn" id="new-chat-btn" aria-label="Start new conversation">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="12" y1="5" x2="12" y2="19"/>
          <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
        <span>New chat</span>
      </button>
    </div>
    
    <nav class="chat-sidebar__nav" aria-label="Chat conversations">
      <div class="chat-sidebar__group">
        <h3 class="chat-sidebar__group-title">Today</h3>
        <ul class="chat-sidebar__list">
          <li>
            <a href="#" class="chat-sidebar__item chat-sidebar__item--active" aria-current="page">
              <svg class="chat-sidebar__item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span class="chat-sidebar__item-text">Getting started with PotionKit</span>
            </a>
          </li>
          <li>
            <a href="#" class="chat-sidebar__item">
              <svg class="chat-sidebar__item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span class="chat-sidebar__item-text">Pricing plan comparison</span>
            </a>
          </li>
        </ul>
      </div>
      
      <div class="chat-sidebar__group">
        <h3 class="chat-sidebar__group-title">Yesterday</h3>
        <ul class="chat-sidebar__list">
          <li>
            <a href="#" class="chat-sidebar__item">
              <svg class="chat-sidebar__item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span class="chat-sidebar__item-text">React component questions</span>
            </a>
          </li>
          <li>
            <a href="#" class="chat-sidebar__item">
              <svg class="chat-sidebar__item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              <span class="chat-sidebar__item-text">Custom theme configuration</span>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    
    <div class="chat-sidebar__footer">
      <div class="chat-sidebar__user">
        <div class="chat-sidebar__avatar">DU</div>
        <div class="chat-sidebar__user-info">
          <span class="chat-sidebar__user-name">Demo User</span>
          <span class="chat-sidebar__user-plan">Pro Plan</span>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Chat Area -->
  <main class="chat-main" role="main">
    <!-- Header -->
    <header class="chat-header">
      <button 
        class="chat-header__menu-btn" 
        id="sidebar-toggle"
        aria-label="Toggle sidebar"
        aria-expanded="false"
        aria-controls="chat-sidebar"
      >
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="3" y1="12" x2="21" y2="12"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <line x1="3" y1="18" x2="21" y2="18"/>
        </svg>
      </button>
      
      <div class="chat-header__agent">
        <div class="chat-header__agent-avatar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="6" width="18" height="12" rx="2"/>
            <path d="M8 12h.01M16 12h.01M12 14v.01"/>
            <path d="M12 2v4"/>
            <path d="M8 2v4M16 2v4"/>
          </svg>
        </div>
        <div class="chat-header__agent-info">
          <h1 class="chat-header__agent-name">PotionKit AI</h1>
          <span class="chat-header__agent-status">
            <span class="chat-header__status-dot" aria-hidden="true"></span>
            Online
          </span>
        </div>
      </div>
      
      <div class="chat-header__actions">
        <button class="chat-header__action" aria-label="Clear conversation" title="Clear conversation">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="3 6 5 6 21 6"/>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
          </svg>
        </button>
        <button class="chat-header__action" aria-label="Settings" title="Settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Message List -->
    <div class="chat-messages" id="chat-messages" role="log" aria-live="polite" aria-label="Chat messages">
      <!-- Welcome / Empty State -->
      <div class="chat-welcome" id="chat-welcome">
        <div class="chat-welcome__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <rect x="3" y="6" width="18" height="12" rx="2"/>
            <path d="M8 12h.01M16 12h.01M12 14v.01"/>
            <path d="M12 2v4"/>
            <path d="M8 2v4M16 2v4"/>
          </svg>
        </div>
        <h2 class="chat-welcome__title">How can I help you today?</h2>
        <p class="chat-welcome__subtitle">Ask me anything about PotionKit, web development, or AI tools. You can also upload images!</p>
        
        <div class="chat-quick-actions">
          <button class="chat-quick-action" data-prompt="How do I get started with PotionKit?">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
            </svg>
            <span>How do I get started?</span>
          </button>
          <button class="chat-quick-action" data-prompt="What features are included in the Pro plan?">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M12 2v20M2 12h20"/>
            </svg>
            <span>What's in the Pro plan?</span>
          </button>
          <button class="chat-quick-action" data-prompt="Can you help me with custom themes?">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
            <span>Custom themes help</span>
          </button>
          <button class="chat-quick-action" data-prompt="Write a React component for me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="16 18 22 12 16 6"/>
              <polyline points="8 6 2 12 8 18"/>
            </svg>
            <span>Generate React code</span>
          </button>
        </div>
      </div>
      
      <!-- Messages will be inserted here -->
    </div>

    <!-- Typing Indicator (hidden by default) -->
    <div class="chat-typing" id="chat-typing" aria-label="Agent is typing" hidden>
      <div class="chat-typing__avatar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <rect x="3" y="6" width="18" height="12" rx="2"/>
          <path d="M8 12h.01M16 12h.01M12 14v.01"/>
          <path d="M12 2v4"/>
          <path d="M8 2v4M16 2v4"/>
        </svg>
      </div>
      <div class="chat-typing__bubble">
        <span class="chat-typing__dot"></span>
        <span class="chat-typing__dot"></span>
        <span class="chat-typing__dot"></span>
      </div>
    </div>

    <!-- Input Area -->
    <div class="chat-input-area">
      <div class="chat-input-wrapper">
        <!-- File Upload Preview Area -->
        <div class="chat-file-preview" id="chat-file-preview" hidden>
          <div class="chat-file-preview__content">
            <img class="chat-file-preview__image" id="chat-file-preview-img" src="" alt="Upload preview">
            <button class="chat-file-preview__remove" id="chat-file-remove" aria-label="Remove file">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        
        <div class="chat-input-container">
          <!-- File Upload Button -->
          <button 
            class="chat-input__attach" 
            id="chat-attach"
            aria-label="Attach file"
            title="Upload image"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
            </svg>
          </button>
          <input 
            type="file" 
            id="chat-file-input" 
            class="chat-file-input" 
            accept="image/*" 
            aria-label="Upload image"
          >
          
          <textarea 
            class="chat-input" 
            id="chat-input"
            placeholder="Type a message..."
            rows="1"
            aria-label="Message input"
          ></textarea>
          <button 
            class="chat-input__send" 
            id="chat-send"
            aria-label="Send message"
            disabled
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="22" y1="2" x2="11" y2="13"/>
              <polygon points="22 2 15 22 11 13 2 9 22 2"/>
            </svg>
          </button>
        </div>
        <p class="chat-input__hint">Press Enter to send, Shift+Enter for new line â€¢ Upload images by clicking the paperclip</p>
      </div>
    </div>
  </main>
</div>

<!-- Mobile Sidebar Overlay -->
<div class="chat-sidebar__overlay" id="chat-sidebar-overlay" aria-hidden="true" hidden></div>

<script src="{{relativePath 'assets/js/mock-auth.js'}}"></script>
<script src="{{relativePath 'assets/js/chat.js'}}"></script>

{{> footer}}